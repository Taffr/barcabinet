generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Ingredient {
  id           Int    @id @default(autoincrement())
  name         String @unique

  dosages      Dosage[]
  inCabinets   User[]
}

model Dosage {
  ingredientId Int 
  recipeId     Int
  unit         String?
  amount       Float?

  recipe       Recipe      @relation(fields: [recipeId], references: [id])  
  ingredient   Ingredient  @relation(fields: [ingredientId], references: [id])  

  @@id([ ingredientId, recipeId ])
}

model Recipe {
  id           Int     @id @default(autoincrement())
  name         String  @unique
  garnish      String?
  preparation  String

  dosages      Dosage[]
  favouritedBy User[]
}

model User {
  id           Int    @id @default(autoincrement())
  name         String @unique
  hash         String

  favourites   Recipe[]
  cabinet      Ingredient[]
}
